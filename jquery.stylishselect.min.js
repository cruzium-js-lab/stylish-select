/**
 * jQuery wrapper for Stylish Select
 * @version 0.1.6
 * @author Tony Leung <tony.leung@cruzium.com>
 * @copyright Copyright (c) 2025 Cruzium Digital
 * @license https://opensource.org/license/gpl-3-0/ GPL-3.0-only
 */
"use strict";window.StylishSelect=window.StylishSelect||function(e,t){var s,i={arrowClass:"stylish-select-caret",hiddenClass:"stylish-select-hidden",placeholderClass:"stylish-select-placeholder",selectClass:void 0,wrapperClass:"stylish-select"};Object.assign(i,t),this.init=function(){if(!("select"!=e.tagName.toLowerCase()||e.hasAttribute("multiple")||e.classList.contains(i.hiddenClass))){e.classList.add(i.hiddenClass),i.selectClass&&e.classList.add(i.selectClass),e.setAttribute("aria-hidden","hidden");var t=document.createElement("div");t.classList.add(i.wrapperClass),e.parentNode.insertBefore(t,e),t.appendChild(e);var l=document.createElement("input");l.setAttribute("type","text"),l.required=e.required,l.readonly=l.disabled=!0,l.classList.add("form-control",i.placeholderClass),e.classList.contains("form-control-sm")&&l.classList.add("form-control-sm"),e.getAttribute("aria-label")&&l.setAttribute("aria-label",e.getAttribute("aria-label")),e.getAttribute("aria-labelledby")&&l.setAttribute("aria-labelledby",e.getAttribute("aria-labelledby")),t.appendChild(l);var a=document.createElement("span");if(a.classList.add(i.arrowClass),t.appendChild(a),this.refresh(),e.addEventListener("change",(function(e){this.refresh()}).bind(this)),e.getAttribute("form"))var r=document.getElementById(e.getAttribute("form"));else var r=e.closest("form");r&&r.addEventListener("reset",(function(e){setTimeout((function(){this.refresh()}).bind(this))}).bind(this)),window.MutationObserver&&new MutationObserver((function(t,i){e.querySelector('option[value="'+s+'"]')?e.value=s:(e.selectedIndex=0,this.refresh())}).bind(this)).observe(e,{childList:!0}),e.stylishSelect=this}},this.refresh=function(){if(e.classList.contains(i.hiddenClass)||this.init(),""==e.value)var t="";else var t=e.querySelector('option[value="'+e.value+'"]').textContent.trim();var l=e.parentNode.querySelector("."+i.placeholderClass);l.value=t,e.querySelector('option[value=""]')&&(l.placeholder=e.querySelector('option[value=""]').textContent.trim()),s=e.value},this.init()},function(e){e.fn.stylishSelect=function(t){return e(this).each(function(){if((t=t||"init").constructor==Object)var s=new StylishSelect(this,t);else{var s=this.stylishSelect||new StylishSelect(this);void 0!==s[t]&&s[t]()}e(this).data("stylish-select",s)}),this}}(jQuery);